if (
  ($(document).ready(function () {
    if (window.matchMedia) {
      let n = $('head > link[rel="icon"][media]');
      $.each(n, function (e, t) {
        let o = window.matchMedia(t.media);
        function r() {
          o.matches && (n.remove(), (n = $(t).appendTo("head")));
        }
        o.addListener(r), r();
      });
    }
  }),
  "undefined" == typeof versions)
) {
  let e = [];
}
!(function (o) {
  window.matchMedia("(hover: hover)").matches &&
    (o(".navbar-nav .dropdown-toggle").on("mouseenter", function (e) {
      o(this).closest(".dropdown").hasClass("show") ||
        (e.stopPropagation(), o(this).trigger("click"));
    }),
    o(".navbar-nav .dropdown-toggle").on("mouseleave", function (e) {
      var t = e.toElement || e.relatedTarget;
      o(this).closest(".dropdown").hasClass("show") &&
        t !== o(this).siblings()[0] &&
        (e.stopPropagation(), o(this).trigger("click"));
    }),
    o(".navbar-nav .dropdown-menu").on("mouseleave", function (e) {
      e = e.toElement || e.relatedTarget;
      o(this).closest(".dropdown").hasClass("show") &&
        e !== o(this).siblings()[0] &&
        o(this).siblings().trigger("click");
    }));
})(jQuery),
  (function (o) {
    window.matchMedia("(hover: hover)").matches &&
      (o("#toggle-full-footer").on("mouseenter", function (e) {
        o(".website-links").hasClass("show") ||
          (e.stopPropagation(), o("#toggle-full-footer").trigger("click"));
      }),
      o("#toggle-full-footer-wrapper").on("mouseleave", function (e) {
        var t = e.toElement || e.relatedTarget;
        o(".website-links").hasClass("show") &&
          t !== o(this).siblings()[0] &&
          (e.stopPropagation(), o("#toggle-full-footer").trigger("click"));
      }));
  })(jQuery);
let searchbar = $(".nav-top .desktop-search-form .header-search"),
  mainmenu = $(".nav-top .main-menu"),
  querystr = $(".desktop-search-form .header-search .form-control"),
  nav = $(".nav-top nav");
function checkScroll() {
  60 < $(document).scrollTop()
    ? ($(".nav-top").addClass("d-none"), $(".inner-body").addClass("not-top"))
    : ($(".nav-top").removeClass("d-none"),
      $(".inner-body").removeClass("not-top"));
}
$(".desktop-search-form .header-search form").on("submit", function (e) {
  ("" !== querystr.val() && "Search" !== querystr.val()) || e.preventDefault();
}),
  $(".desktop-search-form .header-search .form-control").on(
    "focus",
    function (e) {
      searchbar.hasClass("expanded") ||
        ($(".nav-top nav").addClass("d-none"),
        $(".desktop-search-form .header-search svg").addClass("d-none"),
        $(".desktop-search-form .header-search .btn-close").removeClass(
          "d-none"
        ),
        searchbar.addClass("expanded").removeClass("collapsed"),
        mainmenu.addClass("collapsed").removeClass("expanded"),
        setTimeout(() => {
          $(this).attr("autocomplete", "on");
        }, 500));
    }
  ),
  $(".desktop-search-form .header-search .btn-close").on("click", function (e) {
    $(".desktop-search-form .header-search .btn-close").addClass("d-none"),
      $(".desktop-search-form .header-search svg").removeClass("d-none"),
      searchbar.removeClass("expanded").addClass("collapsed"),
      mainmenu.removeClass("collapsed").addClass("expanded"),
      nav.removeClass("d-none"),
      querystr.val(""),
      $(".desktop-search-form .header-search .form-control").attr(
        "autocomplete",
        "off"
      );
  }),
  checkScroll(),
  $(window).on("scroll", function () {
    checkScroll();
  });
let minVersionRedoc = "4.0",
  useApiRedoc =
    0 <= compareVersion(DOCUMENTATION_OPTIONS.VERSION, minVersionRedoc),
  newTabNodes = ["user-manual/api/reference", "cloud-service/apis/reference"],
  oursHost = ["documentation.theopenarmor.org"];
function compareVersion(o, r) {
  let n = !1;
  if ("string" == typeof o && "string" == typeof r) {
    let e = o.split("."),
      t = r.split(".");
    2 <= e.length &&
      2 <= t.length &&
      ((e = e.map((e) => parseInt(e))),
      (t = t.map((e) => parseInt(e))),
      (n =
        e[0] > t[0]
          ? 1
          : e[0] < t[0]
          ? -1
          : e[1] > t[1]
          ? 1
          : e[1] < t[1]
          ? -1
          : 0));
  }
  return n;
}
function markTocNodesWithClass(e, o, r) {
  e.forEach(function (e) {
    markedNode = ".+/" + e + ".html";
    let t = new RegExp(markedNode, "g");
    $(r + " a").each(function () {
      var e = $(this).prop("href").split("#")[0];
      t.test(e) && $(this).addClass(o);
    });
  });
}
$("a.reference.external").each(function () {
  var e = new URL(this.href);
  oursHost.includes(e.host) ||
    $(this).attr("target", "_blank").attr("rel", "noreferrer noopener");
});
let switchButton = $("#mode-switch");
if (0 < switchButton.length) {
  let t = $("#mode-switch-label"),
    e = window.matchMedia("(prefers-color-scheme: dark)"),
    o = localStorage.getItem("theme");
  "dark" == (o = o || (e.matches ? "dark" : "light"))
    ? t.text("Switch to light mode")
    : "light" == o
    ? t.text("Switch to dark mode")
    : t.text("Switch mode"),
    switchButton.attr("class", o),
    switchButton.on("click", function () {
      let e;
      "dark" == this.classList[0]
        ? ((e = "light"), t.text("Switch to dark mode"))
        : ((e = "dark"), t.text("Switch to light mode")),
        switchButton.attr("class", e),
        localStorage.setItem("theme", e),
        document.documentElement.classList.toggle("light-theme"),
        document.documentElement.classList.toggle("dark-theme");
    });
}
function checkEncodeURI(e) {
  return /\%/i.test(e);
}
if (
  ($(function () {
    $("#btn-scroll").on("click", function () {
      return $("html, body").animate({ scrollTop: 0 }, "slow"), !1;
    }),
      $(document).on("scroll", function () {
        $(document).scrollTop() >= 0.5 * jQuery(window).height()
          ? $(".appear-on-scroll").fadeIn("slow")
          : $(".appear-on-scroll").fadeOut("slow");
      }),
      $(".appear-on-scroll.init-hidden").hide(),
      $(".appear-on-scroll.init-hidden").removeClass("init-hidden");
  }),
  jQuery(function (u) {
    let f = DOCUMENTATION_OPTIONS.VERSION,
      p = "undefined" == typeof versions ? [] : versions;
    (s = u("#version-selector .current")),
      (l = DOCUMENTATION_OPTIONS.VERSION),
      0 < p.length
        ? s.html("Version " + l + (l == p[0] ? " (current)" : ""))
        : s.html("Version " + l);
    let n = t();
    u(window).on("hashchange", function () {
      n = t();
    });
    {
      var s = n;
      let t = DOCUMENTATION_OPTIONS.VERSION,
        o = p[0],
        r = "";
      if (t !== o) {
        "/" == (r = document.location.pathname)[r.length - 1] &&
          (r += "index.html"),
          -1 != r.indexOf(t)
            ? (r = r.split("/" + t)[1])
            : -1 != r.indexOf("current") && (r = r.split("/current")[1]);
        var l = document.querySelector(".link-latest");
        let e = "https://" + window.location.hostname + "/current";
        n.hasOwnProperty(o) && (e += s[o]), l && l.setAttribute("href", e);
      }
    }
    s = Object.keys(n);
    let e = s[s.length - 1];
    l = n[e];
    function t() {
      var e = u("#version-selector .dropdown-menu"),
        t = window.location.href || document.URL,
        o = 0 <= t.indexOf("http");
      let n = "",
        s = "";
      var l, a;
      if (0 == p.length) return {};
      -1 !=
      (s =
        "/" ==
        (s = (o ? t.split(document.location.host) : t.split("/html"))[1])[
          s.length - 1
        ]
          ? s + "index.html"
          : s).indexOf(f)
        ? "/" !== (s = s.split("/" + f)[1])[s.length - 1] &&
          (((s = s.split("/"))[0] = ""), (s = s.join("/")))
        : -1 != s.indexOf("current") && (s = s.split("/current")[1]),
        (t = s.split("?")),
        (s = m(t[0])),
        (l = 2 == t.length ? "?" + t[1] : "");
      let i,
        c,
        h = p;
      for (let e = 0; e < h.length; e++)
        newUrls[h[e]] && (newUrls[h[e]] = newUrls[h[e]].map(m)),
          removedUrls[h[e]] && (removedUrls[h[e]] = removedUrls[h[e]].map(m));
      for (let e = 0; e < redirections.length; e++)
        for (release in redirections[e])
          Object.prototype.hasOwnProperty.call(redirections[e], release) &&
            (redirections[e][release] = m(redirections[e][release]));
      var d = (function (o, e, t, n, s, l) {
        var a = [],
          i = [];
        i[e] = t;
        let c = [],
          h = ((o = o.reverse()), C(e, o)),
          d = "toBoth";
        h == o.length && (d = "toBottom");
        0 == h && (d = "toTop");
        c.push({ page: t, version: e, versionNum: h, direction: d });
        let u = 0;
        for (; c.length; ) {
          var f,
            p = c.pop();
          let e = O(p.page, s),
            t = I(p, e, o);
          for (
            0 == t.length &&
            (1 < (f = p.page.split("#")).length &&
              0 != (e = O(f[0], s)).length &&
              (p.page = f[0]),
            (t = I(p, e, o)));
            t.length;

          ) {
            var m = t.pop(),
              g = m.url,
              w = m.release,
              v = m.direction,
              m = C(m.release, o),
              m = { page: g, version: w, versionNum: m, direction: v };
            c.push(m), (i[w] = g);
          }
          if (1e3 <= u) return !(c = []);
          u++;
        }
        for (x in ((historyArray1 = T("toBottom", i, h, o)),
        (historyArray2 = T("toTop", i, h, o)),
        historyArray1))
          !{}.hasOwnProperty.call(historyArray1, x) ||
            (a[x] = historyArray1[x]);
        for (x in historyArray2)
          !{}.hasOwnProperty.call(historyArray2, x) ||
            (a[x] = historyArray2[x]);
        t = (function (e, t) {
          let o = !1;
          for (forRelease in t)
            if ({}.hasOwnProperty.call(t, forRelease))
              for (forUrl in t[forRelease])
                !{}.hasOwnProperty.call(t[forRelease], forUrl) ||
                  e.split("#")[0] != t[forRelease][forUrl] ||
                  (((o = []).release = forRelease),
                  (o.url = t[forRelease][forUrl]));
          return o;
        })(a[o[0]], n);
        if (!1 !== t) {
          var $,
            y = C(t.release, o);
          for (r in a)
            ({}).hasOwnProperty.call(a, r) &&
              (($ = C(r, o)), parseInt($) < parseInt(y)) &&
              delete a[r];
        }
        e = (function (e, t) {
          let o = !1;
          for (forRelease in t)
            if ({}.hasOwnProperty.call(t, forRelease))
              for (forUrl in t[forRelease])
                !{}.hasOwnProperty.call(t[forRelease], forUrl) ||
                  e.split("#")[0] != t[forRelease][forUrl] ||
                  (((o = []).release = forRelease),
                  (o.url = t[forRelease][forUrl]));
          return o;
        })(a[o[o.length - 1]], l);
        if (!1 !== e) {
          var b,
            k = C(e.release, o);
          for (r in a)
            ({}).hasOwnProperty.call(a, r) &&
              ((b = C(r, o)), parseInt(b) >= parseInt(k)) &&
              delete a[r];
        }
        return a;
      })(h, f, s, newUrls, redirections, removedUrls);
      h = h.reverse();
      for (let e = 0; e < p.length; e++)
        (i = ""),
          (c = ""),
          null != d[(a = h[e])] && d[a].length
            ? (i = 0 == e ? "/current" + d[a] + l : "/" + a + d[a] + l)
            : (c =
                'class="disabled" data-toggle="tooltip" data-placement="left" title="This page is not available in version ' +
                p[e] +
                (0 == e ? " (current)" : "") +
                '"'),
          !o &&
            0 < i.length &&
            (i = "https://documentation.theopenarmor.org" + i),
          (n +=
            '<li><a href="' +
            i +
            '" ' +
            c +
            "> Version " +
            p[e] +
            (0 == e ? " (current)" : "") +
            "</a></li>"),
          a == p[0] && u(".no-latest-notice .link-latest").attr("href", i);
      return e.html(n), d;
    }
    function m(t) {
      if (Array.isArray(t)) return t;
      {
        let e = t.trim();
        return (
          "/" ==
            (e =
              "#" ==
              (e = (e = e.replace(/\/$/, "/index.html")).replace(
                /\/{2,}/,
                "/"
              )).charAt(e.length - 1)
                ? e.substring(0, e.length - 1)
                : e).charAt(e.length - 1) ||
            /.*(\.html|#.*)$/.test(e) ||
            (e += "/"),
          (e = checkEncodeURI((e = "/" != e.charAt(0) ? "/" + e : e))
            ? e
            : encodeURI(e))
        );
      }
    }
    function C(e, t) {
      let o = -1;
      for (i in t) e == t[i] && (o = i);
      return o;
    }
    function O(e, t) {
      var o = [];
      for (forId in t)
        if ({}.hasOwnProperty.call(t, forId))
          for (forRelease in t[forId])
            "target" != forRelease &&
              e == t[forId][forRelease] &&
              o.push(t[forId]);
      return o;
    }
    function I(e, t, o) {
      for (var r = [], n = t; n.length; ) {
        var s,
          l,
          a,
          i = n.pop();
        for (forTarget in i.target)
          ({}).hasOwnProperty.call(i.target, forTarget) &&
            ((s = i.target[forTarget].split("=>")),
            (l = parseInt(C(s[0], o))),
            (a = parseInt(C(s[1], o))),
            e.page == i[s[0]]) &&
            ("toBottom" != e.direction &&
              l < a &&
              parseInt(e.versionNum) <= l &&
              r.push({ release: s[1], direction: "toTop", url: i[s[1]] }),
            "toTop" != e.direction) &&
            a < l &&
            parseInt(e.versionNum) >= l &&
            r.push({ release: s[1], direction: "toBottom", url: i[s[1]] });
      }
      return r;
    }
    function T(e, t, o, r) {
      var n,
        s = [];
      for (forVersions in r)
        ({}).hasOwnProperty.call(r, forVersions) &&
          ((forVersions = parseInt(forVersions)),
          "toBottom" == e &&
            forVersions < o &&
            (null == t[r[forVersions]]
              ? forVersions != r.length - 1 &&
                -1 !=
                  (n = (function (e, t, o) {
                    let r = -1;
                    for (i in t)
                      ({}).hasOwnProperty.call(t, i) &&
                        (i = parseInt(i)) > e &&
                        null != o[t[i]] &&
                        -1 == r &&
                        (r = i);
                    return r;
                  })(forVersions, r, t)) &&
                (s[r[forVersions]] = t[r[n]])
              : (s[r[forVersions]] = t[r[forVersions]])),
          "toTop" == e) &&
          forVersions >= o &&
          (null == t[r[forVersions]]
            ? 0 != forVersions &&
              -1 !=
                (n = (function (e, t, o) {
                  let r = -1;
                  for (i in t)
                    ({}).hasOwnProperty.call(t, i) &&
                      (i = parseInt(i)) >= e &&
                      null != o[t[i - 1]] &&
                      -1 == r &&
                      (r = i - 1);
                  return r;
                })(forVersions, r, s)) &&
              (s[r[forVersions]] = s[r[n]])
            : (s[r[forVersions]] = t[r[forVersions]]));
      return s;
    }
    e == p[0] && (e = "current"),
      document.querySelector("link[rel='canonical']") ||
        ((s = document.createElement("link")).setAttribute("rel", "canonical"),
        s.setAttribute(
          "href",
          document.location.protocol +
            "//" +
            document.location.host +
            "/" +
            e +
            l
        ),
        document.head.appendChild(s)),
      u('#version-selector [data-toggle="tooltip"]').tooltip({
        container: "header",
      });
  }),
  $("#version-selector a.disable").click(function (e) {
    return e.preventDefault(), e.stopPropagation(), !1;
  }),
  0 < $("#global-toc").length)
) {
  function completelyHideMenuItems() {
    $("#global-toc li ul").each(function () {
      $(this).closest("li").hasClass("show")
        ? ((this.hidden = !1), $(this).slideDown(300))
        : $(this).slideUp(300, function () {
            this.hidden = !0;
          });
    });
  }
  $("#global-toc .toctree-l1 a").each(function (e) {
    $(this).siblings("ul").length &&
      ($(this).closest("li").addClass("toc-toggle"),
      $(this).append(
        $(
          '<button class="toc-toggle-btn"><span class="sr-only">Expand submenu</span></button>'
        )
      ));
  }),
    $("#global-toc .current-toc-node").each(function () {
      $(this).on("click", function (e) {
        e.preventDefault(), $("html, body").animate({ scrollTop: 0 }, "500");
      });
    }),
    $("#global-toc a .toc-toggle-btn").on("click", function (e) {
      return (
        $("#global-toc a .toc-toggle-btn .sr-only").text("Expand submenu"),
        $(this).find(".sr-only").text("Close submenu"),
        !(li = $(e.target).closest("li")) ||
          0 == li.children("ul").length ||
          (e.stopPropagation(),
          e.preventDefault(),
          li.hasClass("show")
            ? li.removeClass("show")
            : (li.siblings("li").removeClass("show"), li.addClass("show")),
          li.parents().hasClass("show") ||
            $(".globaltoc li.show").addClass("show"),
          $(".globaltoc li.initial").removeClass("initial"),
          completelyHideMenuItems(),
          !1)
      );
    }),
    emptyTocNodes &&
      (markTocNodesWithClass(emptyTocNodes, "empty-toc-node", "#global-toc"),
      $("#global-toc .current-toc-node").addClass("empty-toc-node")),
    $("#global-toc .empty-toc-node").each(function () {
      $(this).on("click", function (e) {
        e.preventDefault(), $(this).find(".toc-toggle-btn").click();
      });
    }),
    useApiRedoc &&
      (markTocNodesWithClass(newTabNodes, "js-new-tab", ""),
      $(".js-new-tab").attr("target", "_blank"));
  let e = [
    "Install Armor manager on Linux",
    "Install Armor agent on Linux",
  ].map(function (e) {
    return e.toLowerCase();
  });
  function hideSubtree(e) {
    $("#global-toc a").each(function () {
      -1 !== jQuery.inArray($(this).text().toLowerCase(), e) &&
        ($(this).siblings().hide(), $(this).children("button").hide());
    });
  }
  hideSubtree(e);
}

